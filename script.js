document.addEventListener('DOMContentLoaded',function(){const ebot=document.getElementById('ebot');const win=document.getElementById('chatbot-window');if(ebot){ebot.addEventListener('click',()=>{if(win.style.display==='flex')win.style.display='none';else{win.style.display='flex';win.style.flexDirection='column';const i=document.getElementById('chat-input');if(i)i.focus();}});}const chatInput=document.querySelector('#chat-input');const chatBody=document.querySelector('#chat-body');if(chatInput){chatInput.addEventListener('keypress',e=>{if(e.key==='Enter'&&chatInput.value.trim()!==''){const txt=chatInput.value.trim();const u=document.createElement('div');u.innerHTML='<strong>You:</strong> '+escapeHTML(txt);chatBody.appendChild(u);setTimeout(()=>{const b=document.createElement('div');b.innerHTML='<strong>E-Bot:</strong> Thanks â€” we received your question. Visit Events or Projects for more details.';chatBody.appendChild(b);chatBody.scrollTop=chatBody.scrollHeight;},600);chatInput.value='';}});}function escapeHTML(s){return s.replace(/[&<>"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));}function initCharts(){if(typeof Chart==='undefined')return;const pieEl=document.getElementById('focusPie');if(pieEl){new Chart(pieEl.getContext('2d'),{type:'pie',data:{labels:['Reforestation','Clean Energy','Water','Education','Wildlife'],datasets:[{data:[40,20,15,15,10],backgroundColor:['#00b894','#4caf50','#8bc34a','#cddc39','#a5d6a7']}]} ,options:{responsive:true}});}const treeEl=document.getElementById('treeChart');if(treeEl){new Chart(treeEl.getContext('2d'),{type:'bar',data:{labels:['2019','2020','2021','2022','2023','2024','2025'],datasets:[{label:'Trees Planted',data:[150,280,450,720,1100,3500,5000],backgroundColor:'#00c77a'}]},options:{responsive:true,scales:{y:{beginAtZero:true}}}});} }initCharts();setTimeout(initCharts,800);});